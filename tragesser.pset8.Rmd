---
title: "Problem Set 8"
author: "Connor Tragesser"
date: "2023-10-22"
output: pdf_document
---
Begin by preparing the environment. The working directory needs to be set where your data will be available (meaning, you will need to change this for your computer), and the packages that are necessary for this exercise need to be loaded from the library (this assumes they are already installed). I'm also clearing the environment before beginning.

```{r setup}
library(foreign)
library(tidyverse)
library(modelsummary)
library(formatR)
library(data.table)
library(readxl)
knitr::opts_chunk$set(tidy.opts = list(width.cutoff = 60), tidy = TRUE)
knitr::opts_chunk$set(echo = TRUE)

knitr::opts_knit$set(root.dir = "/Users/connortragesser/Documents/Political Science Coursework Readings/Quant 1/Problem Set 8/")

getwd()
rm(list = ls()) 

set.seed(2453)

```

## Problem 1

### Part A
The null hypothesis usually means "the expected value of a parameter if there is no effect or relationship."

### Part B

We have independent samples and We could use a two-sample t-test to test for changes in feelings toward Congress.

### Part C

The evidence against the null hypothesis grows stronger

### Part D

The probability, assuming the null hypothesis is true, that a test statistic will take value
at least as extreme as what is actually observed

### Part E

In a test of hypotheses, the p-value is the probability, assuming the null hypothesis is true, that a test statistic will take value at least as extreme as what is actually observed

## Problem 2

### Gailmard 8.1

### Part A
I will use a two sample difference in means test. The null hypothesis is that the average PC income is the same between the Obama and McCain states, and the alternative hypothesis is that they will be different. It will be a two-tailed test. 

```{r}

z <- (44500 - 38500) / (sqrt((5400^2/29) + (4600^2/21)))
1 - pnorm(z)
rm(z)

```

This Z score suggests that the states are significantly different in their average annual PC income.

### Part B
It does not. Andrew Gelman notes this phenomenon in his book Red State Blue State Rich State Poor State, calling it the "red-blue paradox" but it is an application of Simpson's Paradox. In short, Simpson's paradox describes phenomena where aggregation of groups of data mask underlying effects. The proposition that people could still tend to vote republican as they get richer would still hold if the shift is heterogeneous between states. As in, the increase is smaller in blue states and larger in red states. 

### Gailmard 8.2

### Part i
The null hypothesis is that the proprtion that comes up heads is .5

```{r}
z <- ((5/14) - .5)/sqrt((.5*.5)/14)
1 - pnorm(z)
```
This test shows that we fail to reject the null hypothesis that the coin is fair.

### Part ii


## Problem 3

Begin by loading dataset (It should be in the folder you set the WD to at the beginning).

```{r}
nes <- read.dta("nes2004c.dta")
head(nes)
```

### Part A

```{r}
nes %>% 
  group_by(south) %>% 
  summarise(mean(rep_therm, na.rm = TRUE)) %>% 
  ungroup()

t.test(rep_therm ~ south, data = nes)
```
We reject the null hypothesis that there is no difference in feelings toward Republicans between Southerners and non-Southerners.

### Part B
```{r}
t.test(rep_therm ~ south, data = nes, subset = white == 1)
t.test(rep_therm ~ south, data = nes, subset = white != 1)
```

Among whites, we reject the null hypothesis that there is no difference in feelings toward the Republican party between Southerners and non-Southerners. We fail to reject that same null hypothesis among non-whites.

## Problem 4

Download dataset

```{r}
pakistan <- read_xlsx("pakistan.xlsx", sheet = "final")

pakistan$hhincome <- as.numeric(pakistan$hhincome)

pakistan$ln_hhincome = log(pakistan$hhincome)

```

### Part A

The null hypothesis, or $H_0$, is that the average log-household income for Pakistani households is log-38,000 Pakistani Rupees/year. The alternative Hypothesis $H_1$, is that the average log-household income is different from log-38,000in either direction.

```{r}
t.test(pakistan$ln_hhincome, mu = log(38000))

```
This test shows that we reject the null hypothesis.

### Part B

Hypothesis testing of means relies on the cenral limit theorem to calculate z-scores, which would not be achieved with a sample size of 12.

### Part C

